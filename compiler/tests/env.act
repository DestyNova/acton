protocol Env:
    open        : async(str, int, async(?Connection) -> None) -> None

protocol Connection:
    deliver     : async(str) -> None
    close       : async() -> None
    receive_on  : async(input:async(str)->None, error:async(str)->None) -> None
