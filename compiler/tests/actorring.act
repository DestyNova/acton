no_actors = 5
total_msgs = 20

actor Act(i):
    var count = 0
    var rcv_dict = {}
    var snd_dict = {}

    def work(src, table):
        if count < total_msgs:
            count += 1
            dst = (i + 1) % no_actors
            rcv_dict[src] = rcv_dict.get(src,0) + 1
            snd_dict[dst] = snd_dict.get(dst,0) + 1
            print("Actor {i}: count={count}, src={src}, dst={dst}\n")
            table[dst].work(i, table)

actor Root(_ignore):
    table = []

    for i in range(no_actors,None,None):
        table.append(Act(i))

    table[0].work(no_actors, table)
