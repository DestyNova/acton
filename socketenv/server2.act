import socketenv

def log(s):
    print("<",s,">")

actor server(env,sock):

        def echo(s):
            sock.outFile.write(s)
    
        def neterror(s):
            log("Net error: " + s)
            sock.close()

        def established():
            log("Connected from " + sock.remoteHost)
            sock.inFile.installR(echo)

actor root(env): pass
# morally,    env.listen(12345,lambda sock : server(env,sock))  
